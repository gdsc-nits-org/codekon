<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: cli/index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: cli/index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import prompts from "prompts";
import { Command } from "commander";
import { red, lightBlue } from "kolorist";
import { TEMPLATES, DEFAULT_NAME, ORG_NAME } from "../constants/index.js";
const defaultOptions = {
    projectName: DEFAULT_NAME,
    template: TEMPLATES[0]?.name ?? "",
};
/**
 * Contains core concept of the working of the CLI. First checks for arguments and options passed in the CLI. If not found, prompts the user for the project name and template to use.
 *
 * @example Using the CLI
 * ```bash
 * codekon gdsc-project react-js-app
 * ```
 *
 * @returns {Promise&lt;CliResults>} - The project name and template name
 */
export const cli = async () => {
    const cliResults = defaultOptions;
    const program = new Command()
        .name("codekon")
        .description("Entirety of GDSC NITS project templates at your fingertips")
        .version("0.0.1")
        .argument("[projectName]", "name of your project", defaultOptions.projectName)
        .option("-t, --template &lt;value>", "the template to use", cliResults.template)
        .addHelpText("afterAll", `\nExample call: codekon my-app react-js-app\nTemplates available: ${TEMPLATES.map((t) => t.name).join(", ")}`);
    program.parse(process.argv);
    const cliProvidedName = program.args[0] || "";
    const cliProvidedTemplate = program.opts().template;
    if (cliProvidedTemplate &amp;&amp;
        !TEMPLATES.map((t) => t.name).includes(cliProvidedTemplate)) {
        console.log(red("✖") + " Invalid template name");
        process.exit(1);
    }
    if (cliProvidedName) {
        cliResults.projectName = cliProvidedName;
        cliResults.template = cliProvidedTemplate;
        return cliResults;
    }
    let result;
    try {
        result = await prompts([
            {
                type: "text",
                name: "projectName",
                message: lightBlue("Project name: "),
                initial: defaultOptions.projectName,
            },
            {
                type: "select",
                name: "template",
                message: "Select the template: ",
                initial: 0,
                choices: TEMPLATES.map((t) => {
                    const color = t.color;
                    return {
                        title: color(t.display || t.name),
                        value: t.name,
                        description: color(`https://github.com/${ORG_NAME}/${t.name}`),
                    };
                }),
            },
        ], {
            onCancel: () => {
                throw new Error(red("✖") + " Operation cancelled");
            },
        });
        cliResults.projectName = result.projectName;
        cliResults.template = result.template;
        return cliResults;
    }
    catch (e) {
        console.log(e.message);
        process.exit(1);
    }
};
//# sourceMappingURL=index.js.map</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#cli">cli</a></li><li><a href="global.html#installCommand">installCommand</a></li><li><a href="global.html#isGitInstalled">isGitInstalled</a></li><li><a href="global.html#isPnpmInstalled">isPnpmInstalled</a></li><li><a href="global.html#isValidProjectName">isValidProjectName</a></li><li><a href="global.html#main">main</a></li><li><a href="global.html#toValidProjectName">toValidProjectName</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Wed Jun 12 2024 12:34:05 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
